# Main config - adjust these for different experiments

# Project info
project_name: "xai-container-malware"
experiment_name: "baseline"
author: "Your Name"
supervisor: "Dr. Ferdous Ahmed Barbhuiya"

# Data
data:
  dataset_path: "data/cosoco"
  train_split: 0.7
  val_split: 0.1
  test_split: 0.2
  patch_size: 256
  max_patches_per_image: 100
  image_size: [1024, 4096]  # Original COSOCO image dimensions

# Model
model:
  name: "resnet18"  # Options: resnet18, efficientnet_b0, swin_tiny, vit_small
  pretrained: true
  num_classes: 2  # benign, compromised
  dropout: 0.1

# Training
training:
  batch_size: 4
  epochs: 30
  learning_rate: 0.0001
  weight_decay: 0.01
  optimizer: "adamw"
  scheduler: "cosine"
  warmup_epochs: 3
  gradient_clip: 1.0
  
  # Early stopping
  patience: 5
  min_delta: 0.001

# Multiple Instance Learning (MIL)
mil:
  aggregation: "max"  # Options: max, mean, attention, noisy_or
  patch_selection: "all"  # Options: all, random, top_k
  top_k: 50  # If patch_selection is top_k

# XAI Methods
xai:
  methods: ["gradcam", "hirescam", "shap", "lime"]
  
  # GradCAM settings
  gradcam:
    target_layer: "layer4"  # For ResNet18
    use_cuda: true
  
  # SHAP settings
  shap:
    n_samples: 50
    baseline_type: "zeros"  # Options: zeros, random, blur
  
  # LIME settings
  lime:
    n_samples: 1000
    num_features: 10
    segmentation: "quickshift"  # Options: quickshift, slic
  
  # Evaluation
  iou_threshold: 0.5
  pointing_game: true
  faithfulness_steps: 10

# Hilbert Mapping
hilbert:
  enabled: true
  max_gap: 100  # Max gap for grouping byte ranges
  threshold: 0.5  # Attention threshold for forensic analysis

# Paths
paths:
  checkpoint_dir: "outputs/models"
  results_dir: "outputs/results"
  figures_dir: "outputs/figures"
  explanations_dir: "outputs/explanations"
  logs_dir: "logs"

# Logging
logging:
  use_wandb: false
  wandb_project: "mtech-thesis-xai-malware"
  wandb_entity: null  # Set to your wandb username
  log_interval: 10
  save_interval: 5
  tensorboard: false

# Hardware
hardware:
  device: "cuda"  # Options: cuda, cpu, mps (for Apple Silicon)
  num_workers: 4
  pin_memory: true
  mixed_precision: false  # Use automatic mixed precision (AMP)

# Reproducibility
seed: 42
deterministic: false  # Set to true for fully deterministic training (slower)

# Experiment Tracking
metrics:
  - "accuracy"
  - "precision"
  - "recall"
  - "f1"
  - "auc_roc"
  - "confusion_matrix"
